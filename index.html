<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¹Ø¨Ø§ÙŠØ¯ÙŠ Ù„Ù„Ø¹Ø¬Ù„Ø§Øª</title>
  <link rel="icon" href="favicon.png">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f2f2f2; }
    header {
      background: #007bff; color: white;
      display: flex; align-items: center; justify-content: space-between;
      padding: 1rem; flex-wrap: wrap;
    }
    header img { height: 40px; margin-left: 10px; }
    nav { display: flex; gap: 10px; justify-content: flex-end; width: 100%; }
    nav a {
      color: white; background: #0056b3;
      padding: 6px 12px; border-radius: 5px; text-decoration: none;
    }
    footer {
      background: #007bff; color: white;
      text-align: center; padding: 1rem; font-size: 13px;
    }
    footer a { color: white; }

    #searchBar {
      width: 80%; margin: 1rem auto;
      display: block; padding: 0.5rem;
      font-size: 1rem; border: 1px solid #ccc;
      border-radius: 5px;
    }

    .products {
      display: flex;
      overflow-x: auto;
      scroll-behavior: smooth;
      gap: 1rem;
      padding: 1rem;
      white-space: nowrap;
    }
    .products::-webkit-scrollbar { display: none; }
    .products { -ms-overflow-style: none; scrollbar-width: none; }

    .product {
      background: white;
      min-width: 250px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      text-align: center;
      padding: 1rem;
    }
    .product img {
      width: 100%;
      height: auto;
      border-radius: 10px;
    }
    .product h3 { margin: 10px 0; }
    .product p { margin: 5px 0; }
    .product a {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 14px;
      background: #28a745;
      color: white;
      border-radius: 5px;
      text-decoration: none;
    }
  </style>
</head>
<body>

<header>
  <div style="display: flex; align-items: center;">
    <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø±">
    <span>Ù…ØªØ¬Ø± Ø¹Ø¨Ø§ÙŠØ¯ÙŠ Ù„Ù„Ø¹Ø¬Ù„Ø§Øª</span>
  </div>
  <nav>
    <a href="myorders.html">ğŸ›ï¸ Ø·Ù„Ø¨Ø§ØªÙŠ</a>
    <a href="tools.html">ğŸ› ï¸ Ø£Ø¯ÙˆØ§Øª</a>
    <a href="accessories.html">ğŸš— Ù…Ù„Ø­Ù‚Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</a>
  </nav>
</header>

<input type="text" id="searchBar" placeholder="ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø·Ø§Ø±" oninput="filterProducts()">
<section class="products" id="productList"></section>

<footer>
  ğŸšš ØªÙˆØµÙŠÙ„ Ù„Ù€ 58 ÙˆÙ„Ø§ÙŠØ© | ğŸ’µ Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… | ğŸ•’ 7/7 <br>
  ğŸ“ <a href="https://wa.me/21356450486" target="_blank">+21356450486</a> |
  <a href="https://wa.me/213698749015" target="_blank">+213698749015</a> |
  ğŸ“ <a href="https://maps.app.goo.gl/FscQmXPSfN6LBsze7" target="_blank">Ù…ÙˆÙ‚Ø¹Ù†Ø§</a>
</footer>

<!-- Ø³ÙƒØ±Ø¨Øª ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
<script>
let allProducts = [], products = [];

fetch("https://script.google.com/macros/s/AKfycbz2xj8XTW2BmK-CCOH-4TViDX1PaREnMZTCpfi-lXTNTCSCHRAMFKBIoC375uVVhgC1/exec")
  .then(res => res.json())
  .then(data => {
    allProducts = data
      .filter(p => p.number && p.brand && !p.number.toLowerCase().includes("nan"))
      .map(p => ({
        number: p.number,
        brand: p.brand,
        price: p.price,
        quantity: p.quantity,
        img: p.img || 'https://via.placeholder.com/250x200'
      }));
    const available = allProducts.filter(p => parseInt(p.quantity) > 0);
    const unavailable = allProducts.filter(p => parseInt(p.quantity) <= 0);
    products = [...shuffle(available), ...shuffle(unavailable)];
    displayProducts();
    startAutoSlider();
  })
  .catch(err => {
    console.error("ÙØ´Ù„ Ø§Ù„ØªØ­Ù…ÙŠÙ„", err);
    document.getElementById("productList").innerHTML = "<p style='text-align:center;color:red;'>âš ï¸ ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª.</p>";
  });

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function displayProducts() {
  const container = document.getElementById("productList");
  container.innerHTML = '';
  products.forEach(p => {
    const available = parseInt(p.quantity) > 0;
    const box = document.createElement('div');
    box.className = 'product';
    box.innerHTML = `
      <img src="${p.img}" alt="Ø¥Ø·Ø§Ø± ${p.number}">
      <h3>Ø¥Ø·Ø§Ø± ${p.number} - ${p.brand}</h3>
      <p>Ø§Ù„Ø³Ø¹Ø±: ${p.price} Ø¯Ø¬</p>
      <p>${available ? "âœ… Ù…ØªÙˆÙØ±" : "âŒ ØºÙŠØ± Ù…ØªÙˆÙØ±"}</p>
      <a href="order_form.html?number=${encodeURIComponent(p.number)}&brand=${encodeURIComponent(p.brand)}&price=${encodeURIComponent(p.price)}">ğŸ“¦ Ø§Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</a>
    `;
    container.appendChild(box);
  });
}

function filterProducts() {
  const input = document.getElementById('searchBar').value.toLowerCase();
  const filtered = allProducts.filter(p =>
    p.number.toLowerCase().includes(input) || p.brand.toLowerCase().includes(input)
  );
  products = [...filtered];
  displayProducts();
}

// âœ… Ø§Ù„Ø³Ø­Ø¨ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª
function startAutoSlider() {
  const slider = document.getElementById("productList");
  let scrollAmount = 0;
  setInterval(() => {
    slider.scrollLeft += 1;
    scrollAmount += 1;
    if (scrollAmount >= slider.scrollWidth - slider.clientWidth) {
      slider.scrollLeft = 0;
      scrollAmount = 0;
    }
  }, 20);
}
</script>

</body>
</html>