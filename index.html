<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>عبايدي للعجلات</title>
  <style>
    body{font-family:Tahoma;background:#f4f4f4;margin:0;padding:0;}
    header{background:#222;color:#fff;padding:1rem;text-align:center;}
    .wheel-card{background:#fff;border-radius:8px;padding:1rem;margin:1rem auto;width:300px;box-shadow:0 0 8px rgba(0,0,0,0.1);}
    img{width:100%;border-radius:5px;}
    button{background:#007bff;color:white;padding:0.5rem 1rem;border:none;border-radius:5px;cursor:pointer;}
    .modal, .overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;}
    .overlay{background:rgba(0,0,0,0.5);z-index:99;}
    .modal{background:white;z-index:100;padding:1rem;max-width:400px;margin:5% auto;border-radius:8px;}
    input, select{width:100%;padding:0.5rem;margin:0.5rem 0;}
  </style>
</head>
<body>

<header><h1>عبايدي للعجلات</h1></header>

<div id="productsContainer"></div>

<div class="overlay" id="overlay" onclick="closeModal()"></div>
<div class="modal" id="orderModal">
  <h2>نموذج الطلب</h2>
  <form id="orderForm">
    <input type="text" id="fullName" placeholder="الاسم واللقب" required>
    <input type="tel" id="phone" placeholder="رقم الهاتف" required>
    <input type="text" id="wheelNumber" readonly>
    <input type="text" id="brandName" readonly>
    <input type="number" id="quantity" placeholder="الكمية" required>
    <select id="wilaya" required onchange="updateDeliveryPrice()">
      <option value="">اختر الولاية</option>
    </select>
    <p id="deliveryPriceText"></p>
    <input type="hidden" id="unitPrice">
    <button type="submit">تأكيد الطلب</button>
    <button type="button" onclick="closeModal()" style="background:#dc3545;margin-left:5px;">إلغاء</button>
  </form>
</div>

<script>
  const products = [
    {num:'001', brand:'ميشلان', price:12000, qty:10, img:''},
    {num:'002', brand:'كونتيننتال', price:15000, qty:8, img:''},
    {num:'003', brand:'بريجستون', price:14000, qty:5, img:''}
  ];

  const deliveryData = {
    "أدرار": {home:1000, office:600},
    "الشلف": {home:600, office:350},
    "الأغواط": {home:750, office:500}
    // اضف باقي الـ58 ولاية لاحقاً بنفس الصيغة
  };

  // بناء قائمة الولايات
  const wilayaSelect = document.getElementById('wilaya');
  Object.keys(deliveryData).forEach(w=>
    wilayaSelect.add(new Option(w,w))
  );

  // عرض عناصر المنتجات
  const container = document.getElementById('productsContainer');
  products.forEach(p=>{
    const div = document.createElement('div');
    div.className='wheel-card';
    div.innerHTML=`
      ${p.img?`<img src="${p.img}" alt="">`:''}
      <h3>الإطار ${p.num}</h3>
      <p>الماركة: ${p.brand}</p>
      <p>السعر: ${p.price} دج</p>
      <p>الكمية المتوفرة: ${p.qty}</p>
      <button onclick="openModal('${p.num}','${p.brand}',${p.price})">اطلب الآن</button>
    `;
    container.appendChild(div);
  });

  function openModal(num,brand,price){
    document.getElementById('wheelNumber').value=num;
    document.getElementById('brandName').value=brand;
    document.getElementById('unitPrice').value=price;
    document.getElementById('overlay').style.display='block';
    document.getElementById('orderModal').style.display='block';
  }
  function closeModal(){
    document.getElementById('overlay').style.display='none';
    document.getElementById('orderModal').style.display='none';
  }
  function updateDeliveryPrice(){
    const w=wilayaSelect.value;
    if(!deliveryData[w]) return;
    const home=deliveryData[w].home;
    document.getElementById('deliveryPriceText').innerText = `سعر التوصيل: ${home} دج`;
  }
  document.getElementById('orderForm').onsubmit = e=>{
    e.preventDefault();
    alert('تم إرسال طلبك!')
    closeModal();
  };
</script>

</body>
</html>

