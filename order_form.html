<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø¥Ø·Ø§Ø±</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 20px; }
    form { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    input, select, textarea { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #28a745; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; }
    h2 { text-align: center; }
    #totalPrice { font-weight: bold; color: #007bff; text-align: center; }
    .note { color: red; font-size: 0.9em; text-align: center; }
  </style>
</head>
<body>

<h2>ğŸ“¦ Ù†Ù…ÙˆØ°Ø¬ Ø·Ù„Ø¨ Ø¥Ø·Ø§Ø±</h2>
<form id="orderForm">
  <input type="text" name="fullName" placeholder="Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„Ù„Ù‚Ø¨" required>
  <input type="tel" name="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
  <input type="text" name="tireType" placeholder="Ù†ÙˆØ¹ Ø§Ù„Ø¥Ø·Ø§Ø±" required>
  <input type="text" name="tireNumber" placeholder="Ø±Ù‚Ù… Ø§Ù„Ø¥Ø·Ø§Ø±" required>
  <input type="number" name="tirePrice" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¥Ø·Ø§Ø± (Ø¯Ø¬)" required>

  <select name="wilaya" id="wilaya" required onchange="updateDelivery()">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</option>
  </select>

  <select id="deliveryMethod" required onchange="updateDelivery()">
    <option value="home">ğŸšš Ø¥Ù„Ù‰ Ø§Ù„Ù…Ù†Ø²Ù„</option>
    <option value="office">ğŸ¢ Ù…ÙƒØªØ¨ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
  </select>

  <input type="text" name="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„" required>
  <textarea name="note" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"></textarea>
  <input type="text" name="date" readonly id="orderDate">

  <p id="deliveryPriceText">Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„: - Ø¯Ø¬</p>
  <p id="totalPrice">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: - Ø¯Ø¬</p>
  <p class="note">ğŸ’¡ Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø²Ø§Ø¦Ø¯ Ù„Ù„Ø¹Ø¬Ù„Ø§Øª Ù‚Ø¯ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø²ÙŠØ§Ø¯Ø© ÙÙŠ Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„.</p>

  <button type="submit">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
</form>

<script>
// Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„ÙˆÙ„Ø§ÙŠØ©
const deliveryPrices = {
  "Ø£Ø¯Ø±Ø§Ø±": [600, 1650], "Ø§Ù„Ø´Ù„Ù": [600, 900], "Ø§Ù„Ø£ØºÙˆØ§Ø·": [450, 850], "Ø£Ù… Ø§Ù„Ø¨ÙˆØ§Ù‚ÙŠ": [450, 850],
  "Ø¨Ø§ØªÙ†Ø©": [450, 850], "Ø¨Ø¬Ø§ÙŠØ©": [450, 850], "Ø¨Ø³ÙƒØ±Ø©": [450, 850], "Ø¨Ø´Ø§Ø±": [600, 1650],
  "Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©": [450, 850], "Ø¨ÙˆÙŠØ±Ø©": [450, 850], "ØªÙ…Ù†Ø±Ø§Ø³Øª": [800, 1650], "ØªØ¨Ø³Ø©": [450, 850],
  "ØªÙ„Ù…Ø³Ø§Ù†": [600, 900], "ØªÙŠØ§Ø±Øª": [450, 850], "ØªÙŠØ²ÙŠ ÙˆØ²Ùˆ": [450, 850], "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±": [450, 850],
  "Ø§Ù„Ø¬Ù„ÙØ©": [450, 850], "Ø¬ÙŠØ¬Ù„": [450, 850], "Ø³Ø·ÙŠÙ": [450, 850], "ØµÙŠØ¯Ø§": [450, 850],
  "Ø³ÙƒÙŠÙƒØ¯Ø©": [450, 850], "Ø³ÙŠØ¯ÙŠ Ø¨Ù„Ø¹Ø¨Ø§Ø³": [500, 900], "Ø¹Ù†Ø§Ø¨Ø©": [450, 850], "Ù‚Ø§Ù„Ù…Ø©": [450, 850],
  "Ù‚Ø³Ø·Ù†Ø·ÙŠÙ†": [450, 850], "Ù…ÙŠØ¯ÙŠØ§": [450, 850], "Ù…Ø³ØªØºØ§Ù†Ù…": [450, 900], "Ù…Ø³ÙŠÙ„Ø©": [450, 850],
  "Ù…Ø§Ø³ÙƒØ§Ø±Ø§": [500, 900], "ÙˆØ±Ù‚Ù„Ø©": [450, 650], "ÙˆÙ‡Ø±Ø§Ù†": [450, 900], "Ø§Ù„Ø¨ÙŠØ¶": [500, 850],
  "Ø¥Ù„ÙŠØ²ÙŠ": [500, 1000], "Ø¨Ø±Ø¬ Ø¨ÙˆØ¹Ø±ÙŠØ±ÙŠØ¬": [450, 850], "Ø¨ÙˆÙ…Ø±Ø¯Ø§Ø³": [500, 900], "Ø§Ù„Ø·Ø§Ø±Ù": [800, 900],
  "ØªÙ†Ø¯ÙˆÙ": [800, 1650], "ØªÙŠØ³Ù…Ø³ÙŠÙ„Øª": [450, 850], "Ø§Ù„ÙˆØ§Ø¯": [450, 650], "Ø®Ù†Ø´Ù„Ø©": [450, 850],
  "Ø³ÙˆÙ‚ Ø£Ù‡Ø±Ø§Ø³": [450, 850], "ØªÙŠØ¨Ø§Ø²Ø©": [500, 900], "Ù…ÙŠÙ„Ø§": [450, 750], "Ø¹ÙŠÙ† Ø§Ù„Ø¯ÙÙ„Ù‰": [600, 900],
  "Ù†Ø¹Ù…Ø©": [600, 900], "Ø¹ÙŠÙ† ØªÙ…ÙˆØ´Ù†Øª": [500, 900], "ØºØ±Ø¯Ø§ÙŠØ©": [450, 850], "ØºÙ„ÙŠØ²Ø§Ù†": [500, 900],
  "ØªÙŠÙ…ÙŠÙ…ÙˆÙ†": [500, 900], "Ø¨Ø±Ø¬ Ø¨Ø§Ø¬ÙŠ Ù…Ø®ØªØ§Ø±": [1000, 2000], "Ø£ÙˆÙ„Ø§Ø¯ Ø¬Ù„Ø§Ù„": [450, 850],
  "Ø¨Ù†ÙŠ Ø¹Ø¨Ø§Ø³": [850, 1650], "ÙÙŠ ØµÙ„Ø§Ø­": [850, 1650], "ÙÙŠ Ù‚Ø²Ø§Ù…": [700, 1400], "ØªÙ‚Ø±Øª": [300, 500],
  "Ø¬Ø§Ù†Øª": [1200, 2000], "Ø§Ù„Ù…ØºÙŠØ±": [450, 600], "Ø§Ù„Ù…Ù†ÙŠØ¹Ø©": [500, 850]
};

// Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª
const wilayaSelect = document.getElementById("wilaya");
for (const wilaya in deliveryPrices) {
  const option = document.createElement("option");
  option.value = wilaya;
  option.textContent = wilaya;
  wilayaSelect.appendChild(option);
}

// Ø­Ø³Ø§Ø¨ Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„ ÙˆØ§Ù„Ù…Ø¬Ù…ÙˆØ¹
function updateDelivery() {
  const wilaya = wilayaSelect.value;
  const method = document.getElementById("deliveryMethod").value;
  const price = deliveryPrices[wilaya]
    ? (method === "home" ? deliveryPrices[wilaya][0] : deliveryPrices[wilaya][1])
    : 0;

  const tirePrice = parseInt(document.querySelector('[name="tirePrice"]').value) || 0;
  document.getElementById("deliveryPriceText").textContent = "Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„: " + price + " Ø¯Ø¬";
  document.getElementById("totalPrice").textContent = "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: " + (tirePrice + price) + " Ø¯Ø¬";
}

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
document.getElementById("orderForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const form = e.target;
  const formData = new FormData(form);

  const wilaya = form.querySelector('[name="wilaya"]').value;
  const method = document.getElementById("deliveryMethod").value;
  const price = deliveryPrices[wilaya]
    ? (method === "home" ? deliveryPrices[wilaya][0] : deliveryPrices[wilaya][1])
    : 0;

  const tirePrice = parseInt(form.querySelector('[name="tirePrice"]').value) || 0;
  const total = tirePrice + price;

  formData.append("deliveryMethod", method);
  formData.append("deliveryPrice", price);
  formData.append("total", total);

  fetch("https://script.google.com/macros/s/AKfycbyGu78_dzf1ix430OlfMT8_sHj0u_1HrCRt5qNWiI8vlDAbo1LKO7qULAUeH7-X6AGF/exec", {
    method: "POST",
    body: formData
  })
  .then(res => res.text())
  .then(() => {
    alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø¨Ù†Ø¬Ø§Ø­!");
    form.reset();
    document.getElementById("deliveryPriceText").textContent = "Ø³Ø¹Ø± Ø§Ù„ØªÙˆØµÙŠÙ„: - Ø¯Ø¬";
    document.getElementById("totalPrice").textContent = "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: - Ø¯Ø¬";
  })
  .catch(() => alert("âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„."));
});

// ØªØ¹ÙŠÙŠÙ† ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
document.getElementById("orderDate").value = new Date().toISOString().split('T')[0];
</script>
</body>
</html>